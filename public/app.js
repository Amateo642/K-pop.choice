(()=>{"use strict";const e=[{name:"Chung Ha",url:"assets/chung-ha-1.jpg",id:0},{name:"Jessie",url:"assets/jessi-5.jpg",id:1},{name:"IU",url:"assets/IU-1.jpg",id:2},{name:"Hyuna",url:"assets/Hyuna-1.jpg",id:3},{name:"Chaeyoung",url:"assets/chaeyoung-1.jpg",id:4},{name:"Dahyun",url:"assets/dahyun-1.jpg",id:5},{name:"Jeongyeon",url:"assets/jeongyeon-2.jpg",id:6},{name:"Mina",url:"assets/mina-1.jpg",id:7},{name:"Momo",url:"assets/momo-1.jpg",id:8},{name:"Sana",url:"assets/sana-1.jpg",id:9}],t=document.getElementById("app"),n=new class{constructor(e){this.appEl=e}renderGreetings(){const e=document.createElement("p");e.innerText="Отдайте свой голос. Победители проходят в следующий раунд.",this.appEl.appendChild(e);const t=document.createElement("button");t.innerText="Начать",this.appEl.appendChild(t),t.addEventListener("click",(()=>{this.handleGameStart()}))}renderGame(e){this.appEl.innerHTML="";const[t,n]=e;document.querySelector(".main").className="main gradient";const s=document.createElement("div");s.className="image-wrapper";const i=document.createElement("img");i.src=t.url,i.className="image-card animate__animated animate__fadeInLeft animate__delay-1s",s.appendChild(i);const a=document.createElement("img");a.src="assets/vs.png",a.className="image-vs animate__animated animate__zoomIn",s.appendChild(a);const r=document.createElement("img");r.src=n.url,r.className="image-card animate__animated animate__fadeInRight animate__delay-1s",s.appendChild(r),this.appEl.appendChild(s);const d=document.createElement("p");d.innerText="Отдайте свой голос.",this.appEl.appendChild(d);const l=(e,t,n)=>{setTimeout((()=>{this.handleGirlChoose(e)}),1e3),t.className="image-card animate__animated animate__fadeOutUp",n.className="image-card animate__animated animate__fadeOutDown",a.className="image-vs animate__animated animate__zoomOut"};i.addEventListener("click",(function e(){l(t,i,r),i.removeEventListener("click",e)})),r.addEventListener("click",(function e(){l(n,r,i),r.removeEventListener("click",e)}))}renderWinner(e){this.appEl.innerHTML="";const t=document.createElement("p");t.innerText="Победитель!",this.appEl.appendChild(t);const n=document.createElement("img");n.src=e.url,n.className="image-winner animate__animated animate__jackInTheBox",this.appEl.appendChild(n);const s=document.createElement("button");s.innerText="Список лидеров",this.appEl.appendChild(s),s.addEventListener("click",(()=>{this.handleShowLeaders()}))}renderLeaders(e){this.appEl.innerHTML="";const t=document.createElement("p");t.innerText="Текущие лидеры",this.appEl.appendChild(t),e.forEach((e=>{const t=document.createElement("div"),n=document.createElement("img");n.src=e.url,n.className="image-leader animate__animated animate__flipInX",t.appendChild(n);const s=document.createElement("p");s.innerText=e.name,t.appendChild(s);const i=document.createElement("p");i.innerText=e.voices,t.appendChild(i),this.appEl.appendChild(t)}))}onGameStart(e){this.handleGameStart=e}onGirlChoose(e){this.handleGirlChoose=e}onShowLeaders(e){this.handleShowLeaders=e}}(t),s=new class{constructor(){this.db=this.load(),this.girls=[...this.db],this.winners=[]}getPair(){return this.isNextPairExist()?[this.girls[0],this.girls[1]]:void 0}setWinner(e){e&&(e.voices+=10,this.winners.push(e),this.girls.splice(0,2),this.save())}getWinner(){return this.winners[0]}isNextPairExist(){return this.girls.length>1}isNextRoundReady(){return this.winners.length>1||this.girls.length>0}startNextRound(){1===this.girls.length&&this.winners.unshift(this.girls[0]),this.girls=this.winners,this.winners=[]}getLeaders(){return this.db.sort(((e,t)=>e.voices>t.voices?-1:e.voices===t.voices?0:e.voices<t.voices?1:void 0)).slice(0,3)}load(){const t=localStorage.getItem("db");return t?JSON.parse(t):e.map((e=>(e.voices=0,e)))}save(){localStorage.setItem("db",JSON.stringify(this.db)),console.log(JSON.parse(localStorage.getItem("db")))}};new class{constructor(e,t){this.model=e,this.view=t,this.view.onGameStart(this.startGame.bind(this)),this.view.onGirlChoose(this.chooseGirl.bind(this)),this.view.onShowLeaders(this.showLeaders.bind(this)),this.view.renderGreetings()}startGame(){this.model.isNextPairExist()?this.view.renderGame(this.model.getPair()):this.model.isNextRoundReady()?(this.model.startNextRound(),this.view.renderGame(this.model.getPair())):this.view.renderWinner(this.model.getWinner())}chooseGirl(e){this.model.setWinner(e),this.startGame()}showLeaders(){const e=this.model.getLeaders();this.view.renderLeaders(e)}}(s,n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9LLXBvcC5jaG9pY2UvLi9zcmMvZGIuanMiLCJ3ZWJwYWNrOi8vSy1wb3AuY2hvaWNlLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL0stcG9wLmNob2ljZS8uL3NyYy9WaWV3LmpzIiwid2VicGFjazovL0stcG9wLmNob2ljZS8uL3NyYy9Nb2RlbC5qcyIsIndlYnBhY2s6Ly9LLXBvcC5jaG9pY2UvLi9zcmMvQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJkYiIsIm5hbWUiLCJ1cmwiLCJpZCIsImFwcEVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZpZXciLCJ0aGlzIiwidGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVHYW1lU3RhcnQiLCJwYWlyIiwiaW5uZXJIVE1MIiwiZ2lybDEiLCJnaXJsMiIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc05hbWUiLCJpbWFnZVdyYXBwZXIiLCJpbWFnZTEiLCJzcmMiLCJ2c0ltYWdlIiwiaW1hZ2UyIiwiaGFuZGxlQ2xpY2siLCJ3aW5uZXIiLCJ3aW5uZXJJbWFnZSIsImxvc2VySW1hZ2UiLCJzZXRUaW1lb3V0IiwiaGFuZGxlR2lybENob29zZSIsImNiIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVNob3dMZWFkZXJzIiwibGVhZGVycyIsImZvckVhY2giLCJnaXJsIiwibGVhZGVyQmxvY2siLCJpbWFnZSIsInZvaWNlcyIsIm1vZGVsIiwibG9hZCIsImdpcmxzIiwid2lubmVycyIsImlzTmV4dFBhaXJFeGlzdCIsInVuZGVmaW5lZCIsInB1c2giLCJzcGxpY2UiLCJzYXZlIiwibGVuZ3RoIiwidW5zaGlmdCIsInNvcnQiLCJzbGljZSIsImxvY2FsZGIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwibWFwIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJvbkdhbWVTdGFydCIsInN0YXJ0R2FtZSIsImJpbmQiLCJvbkdpcmxDaG9vc2UiLCJjaG9vc2VHaXJsIiwib25TaG93TGVhZGVycyIsInNob3dMZWFkZXJzIiwicmVuZGVyR3JlZXRpbmdzIiwicmVuZGVyR2FtZSIsImdldFBhaXIiLCJpc05leHRSb3VuZFJlYWR5Iiwic3RhcnROZXh0Um91bmQiLCJyZW5kZXJXaW5uZXIiLCJnZXRXaW5uZXIiLCJzZXRXaW5uZXIiLCJnZXRMZWFkZXJzIiwicmVuZGVyTGVhZGVycyJdLCJtYXBwaW5ncyI6Im1CQUFPLE1BQU1BLEVBQUssQ0FDZCxDQUNJQyxLQUFNLFdBQ05DLElBQUssd0JBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLFNBQ05DLElBQUsscUJBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLEtBQ05DLElBQUssa0JBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLFFBQ05DLElBQUsscUJBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLFlBQ05DLElBQUsseUJBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLFNBQ05DLElBQUssc0JBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLFlBQ05DLElBQUsseUJBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLE9BQ05DLElBQUssb0JBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLE9BQ05DLElBQUssb0JBQ0xDLEdBQUksR0FFUixDQUNJRixLQUFNLE9BQ05DLElBQUssb0JBQ0xDLEdBQUksSUM1Q05DLEVBQVFDLFNBQVNDLGVBQWUsT0FDaENDLEVBQU8sSUNOTixNQUNILFlBQWFILEdBQ1RJLEtBQUtKLE1BQVFBLEVBR2pCLGtCQUNJLE1BQU1LLEVBQU9KLFNBQVNLLGNBQWMsS0FDcENELEVBQUtFLFVBQVksNkRBQ2pCSCxLQUFLSixNQUFNUSxZQUFZSCxHQUV2QixNQUFNSSxFQUFTUixTQUFTSyxjQUFjLFVBQ3RDRyxFQUFPRixVQUFZLFNBQ25CSCxLQUFLSixNQUFNUSxZQUFZQyxHQUV2QkEs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S0QsS0FBSzBELFlBQVl6RCxLQUFLMEQsVUFBVUMsS0FBSzNELE9BQzFDQSxLQUFLRCxLQUFLNkQsYUFBYTVELEtBQUs2RCxXQUFXRixLQUFLM0QsT0FDNUNBLEtBQUtELEtBQUsrRCxjQUFjOUQsS0FBSytELFlBQVlKLEtBQUszRCxPQUM5Q0EsS0FBS0QsS0FBS2lFLGtCQUdkLFlBQ1FoRSxLQUFLa0MsTUFBTUksa0JBQ1h0QyxLQUFLRCxLQUFLa0UsV0FBV2pFLEtBQUtrQyxNQUFNZ0MsV0FDekJsRSxLQUFLa0MsTUFBTWlDLG9CQUNsQm5FLEtBQUtrQyxNQUFNa0MsaUJBQ1hwRSxLQUFLRCxLQUFLa0UsV0FBV2pFLEtBQUtrQyxNQUFNZ0MsWUFFaENsRSxLQUFLRCxLQUFLc0UsYUFBYXJFLEtBQUtrQyxNQUFNb0MsYUFJMUMsV0FBV2xELEdBQ1BwQixLQUFLa0MsTUFBTXFDLFVBQVVuRCxHQUNyQnBCLEtBQUswRCxZQUdULGNBQ0ksTUFBTTlCLEVBQVU1QixLQUFLa0MsTUFBTXNDLGFBQzNCeEUsS0FBS0QsS0FBSzBFLGNBQWM3QyxLSHBCRU0sRUFBT25DLEkiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGRiID0gW1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdDaHVuZyBIYScsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL2NodW5nLWhhLTEuanBnJyxcclxuICAgICAgICBpZDogMCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0plc3NpZScsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL2plc3NpLTUuanBnJyxcclxuICAgICAgICBpZDogMVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnSVUnLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9JVS0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0h5dW5hJyxcclxuICAgICAgICB1cmw6ICdhc3NldHMvSHl1bmEtMS5qcGcnLFxyXG4gICAgICAgIGlkOiAzXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdDaGFleW91bmcnLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9jaGFleW91bmctMS5qcGcnLFxyXG4gICAgICAgIGlkOiA0XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdEYWh5dW4nLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9kYWh5dW4tMS5qcGcnLFxyXG4gICAgICAgIGlkOiA1XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdKZW9uZ3llb24nLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9qZW9uZ3llb24tMi5qcGcnLFxyXG4gICAgICAgIGlkOiA2XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdNaW5hJyxcclxuICAgICAgICB1cmw6ICdhc3NldHMvbWluYS0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ01vbW8nLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9tb21vLTEuanBnJyxcclxuICAgICAgICBpZDogOFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnU2FuYScsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL3NhbmEtMS5qcGcnLFxyXG4gICAgICAgIGlkOiA5XHJcbiAgICB9LFxyXG5dXHJcbiIsImltcG9ydCB7Q29udHJvbGxlcn0gZnJvbSAnLi9Db250cm9sbGVyJztcclxuaW1wb3J0IHtWaWV3fSBmcm9tICcuL1ZpZXcnO1xyXG5pbXBvcnQge01vZGVsfSBmcm9tICcuL01vZGVsJztcclxuaW1wb3J0ICcuL3Njc3Mvc3R5bGUuc2Nzcyc7XHJcblxyXG5jb25zdCBhcHBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKTtcclxuY29uc3QgdmlldyA9IG5ldyBWaWV3KGFwcEVsKTtcclxuY29uc3QgbW9kZWwgPSBuZXcgTW9kZWwoKTtcclxuY29uc3QgY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKG1vZGVsLCB2aWV3KTtcclxuIiwiZXhwb3J0IGNsYXNzIFZpZXcge1xyXG4gICAgY29uc3RydWN0b3IgKGFwcEVsKSB7XHJcbiAgICAgICAgdGhpcy5hcHBFbCA9IGFwcEVsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckdyZWV0aW5ncygpIHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIHRleHQuaW5uZXJUZXh0ID0gJ9Ce0YLQtNCw0LnRgtC1INGB0LLQvtC5INCz0L7Qu9C+0YEuINCf0L7QsdC10LTQuNGC0LXQu9C4INC/0YDQvtGF0L7QtNGP0YIg0LIg0YHQu9C10LTRg9GO0YnQuNC5INGA0LDRg9C90LQuJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gJ9Cd0LDRh9Cw0YLRjCc7XHJcbiAgICAgICAgdGhpcy5hcHBFbC5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlR2FtZVN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyR2FtZShwYWlyKSB7XHJcbiAgICAgICAgdGhpcy5hcHBFbC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBjb25zdCBbZ2lybDEsIGdpcmwyXSA9IHBhaXI7IFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJykuY2xhc3NOYW1lID0gJ21haW4gZ3JhZGllbnQnO1xyXG5cclxuICAgICAgICBjb25zdCBpbWFnZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBpbWFnZVdyYXBwZXIuY2xhc3NOYW1lID0gJ2ltYWdlLXdyYXBwZXInO1xyXG5cclxuICAgICAgICBjb25zdCBpbWFnZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICBpbWFnZTEuc3JjID0gZ2lybDEudXJsO1xyXG4gICAgICAgIGltYWdlMS5jbGFzc05hbWUgPSAnaW1hZ2UtY2FyZCBhbmltYXRlX19hbmltYXRlZCBhbmltYXRlX19mYWRlSW5MZWZ0IGFuaW1hdGVfX2RlbGF5LTFzJztcclxuICAgICAgICBpbWFnZVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcclxuXHJcbiAgICAgICAgY29uc3QgdnNJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcbiAgICAgICAgdnNJbWFnZS5zcmMgPSAnYXNzZXRzL3ZzLnBuZyc7XHJcbiAgICAgICAgdnNJbWFnZS5jbGFzc05hbWUgPSAnaW1hZ2UtdnMgYW5pbWF0ZV9fYW5pbWF0ZWQgYW5pbWF0ZV9fem9vbUluJztcclxuICAgICAgICBpbWFnZVdyYXBwZXIuYXBwZW5kQ2hpbGQodnNJbWFnZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGltYWdlMi5zcmMgPSBnaXJsMi51cmw7XHJcbiAgICAgICAgaW1hZ2UyLmNsYXNzTmFtZSA9ICdpbWFnZS1jYXJkIGFuaW1hdGVfX2FuaW1hdGVkIGFuaW1hdGVfX2ZhZGVJblJpZ2h0IGFuaW1hdGVfX2RlbGF5LTFzJztcclxuICAgICAgICBpbWFnZVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW1hZ2UyKTsgXHJcblxyXG4gICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQoaW1hZ2VXcmFwcGVyKTsgIFxyXG5cclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIHRleHQuaW5uZXJUZXh0ID0gJ9Ce0YLQtNCw0LnRgtC1INGB0LLQvtC5INCz0L7Qu9C+0YEuJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICAgICBjb25zdCBoYW5kbGVDbGljayA9ICh3aW5uZXIsIHdpbm5lckltYWdlLCBsb3NlckltYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVHaXJsQ2hvb3NlKHdpbm5lcik7XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICB3aW5uZXJJbWFnZS5jbGFzc05hbWUgPSAnaW1hZ2UtY2FyZCBhbmltYXRlX19hbmltYXRlZCBhbmltYXRlX19mYWRlT3V0VXAnO1xyXG4gICAgICAgICAgICBsb3NlckltYWdlLmNsYXNzTmFtZSA9ICdpbWFnZS1jYXJkIGFuaW1hdGVfX2FuaW1hdGVkIGFuaW1hdGVfX2ZhZGVPdXREb3duJztcclxuICAgICAgICAgICAgdnNJbWFnZS5jbGFzc05hbWUgPSAnaW1hZ2UtdnMgYW5pbWF0ZV9fYW5pbWF0ZWQgYW5pbWF0ZV9fem9vbU91dCc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW1hZ2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gY2IoKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZUNsaWNrKGdpcmwxLCBpbWFnZTEsIGltYWdlMik7XHJcbiAgICAgICAgICAgIGltYWdlMS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbWFnZTIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBjYigpIHtcclxuICAgICAgICAgICAgaGFuZGxlQ2xpY2soZ2lybDIsIGltYWdlMiwgaW1hZ2UxKTtcclxuICAgICAgICAgICAgaW1hZ2UyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcldpbm5lcih3aW5uZXIpIHtcclxuICAgICAgICB0aGlzLmFwcEVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIHRleHQuaW5uZXJUZXh0ID0gJ9Cf0L7QsdC10LTQuNGC0LXQu9GMISc7XHJcbiAgICAgICAgdGhpcy5hcHBFbC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2UxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgaW1hZ2UxLnNyYyA9IHdpbm5lci51cmw7XHJcbiAgICAgICAgaW1hZ2UxLmNsYXNzTmFtZSA9ICdpbWFnZS13aW5uZXIgYW5pbWF0ZV9fYW5pbWF0ZWQgYW5pbWF0ZV9famFja0luVGhlQm94JztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKGltYWdlMSk7IFxyXG5cclxuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gJ9Ch0L/QuNGB0L7QuiDQu9C40LTQtdGA0L7Qsic7XHJcbiAgICAgICAgdGhpcy5hcHBFbC5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU2hvd0xlYWRlcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJMZWFkZXJzKGxlYWRlcnMpIHtcclxuICAgICAgICB0aGlzLmFwcEVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIHRleHQuaW5uZXJUZXh0ID0gJ9Ci0LXQutGD0YnQuNC1INC70LjQtNC10YDRiyc7XHJcbiAgICAgICAgdGhpcy5hcHBFbC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgICAgICAgbGVhZGVycy5mb3JFYWNoKGdpcmwgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsZWFkZXJCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgaW1hZ2Uuc3JjID0gZ2lybC51cmw7XHJcbiAgICAgICAgICAgIGltYWdlLmNsYXNzTmFtZSA9ICdpbWFnZS1sZWFkZXIgYW5pbWF0ZV9fYW5pbWF0ZWQgYW5pbWF0ZV9fZmxpcEluWCc7XHJcbiAgICAgICAgICAgIGxlYWRlckJsb2NrLmFwcGVuZENoaWxkKGltYWdlKTsgXHJcblxyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICBuYW1lLmlubmVyVGV4dCA9IGdpcmwubmFtZTtcclxuICAgICAgICAgICAgbGVhZGVyQmxvY2suYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2b2ljZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgICAgIHZvaWNlcy5pbm5lclRleHQgPSBnaXJsLnZvaWNlcztcclxuICAgICAgICAgICAgbGVhZGVyQmxvY2suYXBwZW5kQ2hpbGQodm9pY2VzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQobGVhZGVyQmxvY2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uR2FtZVN0YXJ0KGNiKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVHYW1lU3RhcnQgPSBjYjtcclxuICAgIH1cclxuXHJcbiAgICBvbkdpcmxDaG9vc2UoY2IpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUdpcmxDaG9vc2UgPSBjYjtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3dMZWFkZXJzKGNiKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTaG93TGVhZGVycyA9IGNiO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7ZGJ9IGZyb20gJy4vZGInO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGIgPSB0aGlzLmxvYWQoKTtcclxuICAgICAgICB0aGlzLmdpcmxzID0gWy4uLnRoaXMuZGJdO1xyXG4gICAgICAgIHRoaXMud2lubmVycyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBhaXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNOZXh0UGFpckV4aXN0KCkgPyBbdGhpcy5naXJsc1swXSwgdGhpcy5naXJsc1sxXV0gOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0V2lubmVyKHdpbm5lcikge1xyXG4gICAgICAgIGlmICh3aW5uZXIpIHtcclxuICAgICAgICAgICAgd2lubmVyLnZvaWNlcyArPSAxMDtcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJzLnB1c2god2lubmVyKTtcclxuICAgICAgICAgICAgdGhpcy5naXJscy5zcGxpY2UoMCwyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgfSBcclxuICAgIH1cclxuXHJcbiAgICBnZXRXaW5uZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lubmVyc1swXTtcclxuICAgIH1cclxuXHJcbiAgICBpc05leHRQYWlyRXhpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2lybHMubGVuZ3RoID4gMTtcclxuICAgIH1cclxuXHJcbiAgICBpc05leHRSb3VuZFJlYWR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpbm5lcnMubGVuZ3RoID4gMSB8fCB0aGlzLmdpcmxzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnROZXh0Um91bmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2lybHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lubmVycy51bnNoaWZ0KHRoaXMuZ2lybHNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdpcmxzID0gdGhpcy53aW5uZXJzO1xyXG4gICAgICAgIHRoaXMud2lubmVycyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExlYWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuc29ydCgoZ2lybDEsIGdpcmwyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnaXJsMS52b2ljZXMgPiBnaXJsMi52b2ljZXMpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKGdpcmwxLnZvaWNlcyA9PT0gZ2lybDIudm9pY2VzKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKGdpcmwxLnZvaWNlcyA8IGdpcmwyLnZvaWNlcykgcmV0dXJuIDE7XHJcbiAgICAgICAgfSkuc2xpY2UoMCwgMyk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZCgpIHtcclxuICAgICAgICBjb25zdCBsb2NhbGRiID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RiJyk7XHJcbiAgICAgICAgLy8g0J/QvtC70YPRh9C40LvQuCDQsdCw0LfRgyDQuNC3INCb0KEg0LXRgdC70Lgg0LHQsNC30LAg0LXRgdGC0YwsINGC0L7Qs9C00LAg0LLQtdGA0L3Rg9GC0Ywg0LXQtSwg0LXRgdC70Lgg0LXQtSDQvdC10YIgKNCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC30L3QsNGH0LXQvdC40LUg0L3Rg9C70Lsp0LLQtdGA0L3Rg9GC0Ywg0JTQkSDQuNC3INGE0LDQudC70LAuXHJcbiAgICAgICAgaWYgKGxvY2FsZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxkYik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRiLm1hcChnaXJsID0+IHtcclxuICAgICAgICAgICAgICAgIGdpcmwudm9pY2VzID0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnaXJsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZSgpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGInLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRiKSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGInKSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy52aWV3Lm9uR2FtZVN0YXJ0KHRoaXMuc3RhcnRHYW1lLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5vbkdpcmxDaG9vc2UodGhpcy5jaG9vc2VHaXJsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5vblNob3dMZWFkZXJzKHRoaXMuc2hvd0xlYWRlcnMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlckdyZWV0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0R2FtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbC5pc05leHRQYWlyRXhpc3QoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVuZGVyR2FtZSh0aGlzLm1vZGVsLmdldFBhaXIoKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGVsLmlzTmV4dFJvdW5kUmVhZHkoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnN0YXJ0TmV4dFJvdW5kKCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5yZW5kZXJHYW1lKHRoaXMubW9kZWwuZ2V0UGFpcigpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVuZGVyV2lubmVyKHRoaXMubW9kZWwuZ2V0V2lubmVyKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaG9vc2VHaXJsKHdpbm5lcikge1xyXG4gICAgICAgIHRoaXMubW9kZWwuc2V0V2lubmVyKHdpbm5lcik7XHJcbiAgICAgICAgdGhpcy5zdGFydEdhbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TGVhZGVycygpIHtcclxuICAgICAgICBjb25zdCBsZWFkZXJzID0gdGhpcy5tb2RlbC5nZXRMZWFkZXJzKCk7XHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlckxlYWRlcnMobGVhZGVycyk7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==