(()=>{"use strict";const e=[{name:"Chung Ha",url:"assets/chung-ha-1.jpg",id:0},{name:"Jessie",url:"assets/jessi-5.jpg",id:1},{name:"IU",url:"assets/IU-1.jpg",id:2},{name:"Hyuna",url:"assets/Hyuna-1.jpg",id:3},{name:"Chaeyoung",url:"assets/chaeyoung-1.jpg",id:4},{name:"Dahyun",url:"assets/dahyun-1.jpg",id:5},{name:"Jeongyeon",url:"assets/jeongyeon-2.jpg",id:6},{name:"Mina",url:"assets/mina-1.jpg",id:7},{name:"Momo",url:"assets/momo-1.jpg",id:8},{name:"Sana",url:"assets/sana-1.jpg",id:9}],t=document.getElementById("app"),s=new class{constructor(e){this.appEl=e}renderGreetings(){const e=document.createElement("p");e.innerText="Отдайте свой голос. Победители проходят в следующий раунд.",this.appEl.appendChild(e);const t=document.createElement("button");t.innerText="Начать",this.appEl.appendChild(t),t.addEventListener("click",(()=>{this.handleGameStart()}))}renderGame(e){this.appEl.innerHTML="";const[t,s]=e,i=document.createElement("div");i.className="image-wrapper";const n=document.createElement("img");n.src=t.url,n.className="image-card",i.appendChild(n);const a=document.createElement("img");a.src="assets/vs.png",a.className="image-vs",i.appendChild(a);const r=document.createElement("img");r.src=s.url,r.className="image-card",i.appendChild(r),this.appEl.appendChild(i);const d=document.createElement("p");d.innerText="Отдайте свой голос.",this.appEl.appendChild(d),n.addEventListener("click",(()=>{this.handleGirlChoose(t)})),r.addEventListener("click",(()=>{this.handleGirlChoose(s)}))}renderWinner(e){this.appEl.innerHTML="";const t=document.createElement("p");t.innerText="Победитель!",this.appEl.appendChild(t);const s=document.createElement("img");s.src=e.url,s.className="image-card",this.appEl.appendChild(s);const i=document.createElement("button");i.innerText="Список лидеров",this.appEl.appendChild(i),i.addEventListener("click",(()=>{this.handleShowLeaders()}))}renderLeaders(e){this.appEl.innerHTML="";const t=document.createElement("p");t.innerText="Текущие лидеры",this.appEl.appendChild(t),e.forEach((e=>{const t=document.createElement("div"),s=document.createElement("img");s.src=e.url,s.className="image-leader",t.appendChild(s);const i=document.createElement("p");i.innerText=e.name,t.appendChild(i);const n=document.createElement("p");n.innerText=e.voices,t.appendChild(n),this.appEl.appendChild(t)}))}onGameStart(e){this.handleGameStart=e}onGirlChoose(e){this.handleGirlChoose=e}onShowLeaders(e){this.handleShowLeaders=e}}(t),i=new class{constructor(){this.db=this.load(),this.girls=[...this.db],this.winners=[]}getPair(){return this.isNextPairExist()?[this.girls[0],this.girls[1]]:void 0}setWinner(e){e&&(e.voices+=10,this.winners.push(e),this.girls.splice(0,2),this.save())}getWinner(){return this.winners[0]}isNextPairExist(){return this.girls.length>1}isNextRoundReady(){return this.winners.length>1||this.girls.length>0}startNextRound(){1===this.girls.length&&this.winners.unshift(this.girls[0]),this.girls=this.winners,this.winners=[]}getLeaders(){return this.db.sort(((e,t)=>e.voices>t.voices?-1:e.voices===t.voices?0:e.voices<t.voices?1:void 0)).slice(0,3)}load(){const t=localStorage.getItem("db");return t?JSON.parse(t):e.map((e=>(e.voices=0,e)))}save(){localStorage.setItem("db",JSON.stringify(this.db)),console.log(JSON.parse(localStorage.getItem("db")))}};new class{constructor(e,t){this.model=e,this.view=t,this.view.onGameStart(this.startGame.bind(this)),this.view.onGirlChoose(this.chooseGirl.bind(this)),this.view.onShowLeaders(this.showLeaders.bind(this)),this.view.renderGreetings()}startGame(){this.model.isNextPairExist()?this.view.renderGame(this.model.getPair()):this.model.isNextRoundReady()?(this.model.startNextRound(),this.view.renderGame(this.model.getPair())):this.view.renderWinner(this.model.getWinner())}chooseGirl(e){this.model.setWinner(e),this.startGame()}showLeaders(){const e=this.model.getLeaders();this.view.renderLeaders(e)}}(i,s)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9LLXBvcC5jaG9pY2UvLi9zcmMvZGIuanMiLCJ3ZWJwYWNrOi8vSy1wb3AuY2hvaWNlLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL0stcG9wLmNob2ljZS8uL3NyYy9WaWV3LmpzIiwid2VicGFjazovL0stcG9wLmNob2ljZS8uL3NyYy9Nb2RlbC5qcyIsIndlYnBhY2s6Ly9LLXBvcC5jaG9pY2UvLi9zcmMvQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJkYiIsIm5hbWUiLCJ1cmwiLCJpZCIsImFwcEVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZpZXciLCJ0aGlzIiwidGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVHYW1lU3RhcnQiLCJwYWlyIiwiaW5uZXJIVE1MIiwiZ2lybDEiLCJnaXJsMiIsImltYWdlV3JhcHBlciIsImNsYXNzTmFtZSIsImltYWdlMSIsInNyYyIsInZzSW1hZ2UiLCJpbWFnZTIiLCJoYW5kbGVHaXJsQ2hvb3NlIiwid2lubmVyIiwiaGFuZGxlU2hvd0xlYWRlcnMiLCJsZWFkZXJzIiwiZm9yRWFjaCIsImdpcmwiLCJsZWFkZXJCbG9jayIsImltYWdlIiwidm9pY2VzIiwiY2IiLCJtb2RlbCIsImxvYWQiLCJnaXJscyIsIndpbm5lcnMiLCJpc05leHRQYWlyRXhpc3QiLCJ1bmRlZmluZWQiLCJwdXNoIiwic3BsaWNlIiwic2F2ZSIsImxlbmd0aCIsInVuc2hpZnQiLCJzb3J0Iiwic2xpY2UiLCJsb2NhbGRiIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsIm1hcCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwib25HYW1lU3RhcnQiLCJzdGFydEdhbWUiLCJiaW5kIiwib25HaXJsQ2hvb3NlIiwiY2hvb3NlR2lybCIsIm9uU2hvd0xlYWRlcnMiLCJzaG93TGVhZGVycyIsInJlbmRlckdyZWV0aW5ncyIsInJlbmRlckdhbWUiLCJnZXRQYWlyIiwiaXNOZXh0Um91bmRSZWFkeSIsInN0YXJ0TmV4dFJvdW5kIiwicmVuZGVyV2lubmVyIiwiZ2V0V2lubmVyIiwic2V0V2lubmVyIiwiZ2V0TGVhZGVycyIsInJlbmRlckxlYWRlcnMiXSwibWFwcGluZ3MiOiJtQkFBTyxNQUFNQSxFQUFLLENBQ2QsQ0FDSUMsS0FBTSxXQUNOQyxJQUFLLHdCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxTQUNOQyxJQUFLLHFCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxLQUNOQyxJQUFLLGtCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxRQUNOQyxJQUFLLHFCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxZQUNOQyxJQUFLLHlCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxTQUNOQyxJQUFLLHNCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxZQUNOQyxJQUFLLHlCQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxPQUNOQyxJQUFLLG9CQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxPQUNOQyxJQUFLLG9CQUNMQyxHQUFJLEdBRVIsQ0FDSUYsS0FBTSxPQUNOQyxJQUFLLG9CQUNMQyxHQUFJLElDNUNOQyxFQUFRQyxTQUFTQyxlQUFlLE9BQ2hDQyxFQUFPLElDTk4sTUFDSCxZQUFhSCxHQUNUSSxLQUFLSixNQUFRQSxFQUdqQixrQkFDSSxNQUFNSyxFQUFPSixTQUFTSyxjQUFjLEtBQ3BDRCxFQUFLRSxVQUFZLDZEQUNqQkgsS0FBS0osTUFBTVEsWUFBWUgsR0FFdkIsTUFBTUksRUFBU1IsU0FBU0ssY0FBYyxVQUN0Q0csRUFBT0YsVUFBWSxTQUNuQkgsS0FBS0osTUFBTVEsWUFBWUMsR0FFdkJBLEVBQU9DLGlCQUFpQixTQUFTLEtBQzdCTixLQUFLTyxxQkFJYixXQUFXQyxHQUNQUixLQUFLSixNQUFNYSxVQUFZLEdBQ3ZCLE1BQU9DLEVBQU9DLEdBQVNILEVB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QUkxQyxXQUFXN0MsR0FDUG5CLEtBQUs0QixNQUFNcUMsVUFBVTlDLEdBQ3JCbkIsS0FBS29ELFlBR1QsY0FDSSxNQUFNL0IsRUFBVXJCLEtBQUs0QixNQUFNc0MsYUFDM0JsRSxLQUFLRCxLQUFLb0UsY0FBYzlDLEtIcEJFTyxFQUFPN0IsSSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZGIgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0NodW5nIEhhJyxcclxuICAgICAgICB1cmw6ICdhc3NldHMvY2h1bmctaGEtMS5qcGcnLFxyXG4gICAgICAgIGlkOiAwLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnSmVzc2llJyxcclxuICAgICAgICB1cmw6ICdhc3NldHMvamVzc2ktNS5qcGcnLFxyXG4gICAgICAgIGlkOiAxXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdJVScsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL0lVLTEuanBnJyxcclxuICAgICAgICBpZDogMlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnSHl1bmEnLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9IeXVuYS0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDNcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0NoYWV5b3VuZycsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL2NoYWV5b3VuZy0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDRcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0RhaHl1bicsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL2RhaHl1bi0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDVcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0plb25neWVvbicsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL2plb25neWVvbi0yLmpwZycsXHJcbiAgICAgICAgaWQ6IDZcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ01pbmEnLFxyXG4gICAgICAgIHVybDogJ2Fzc2V0cy9taW5hLTEuanBnJyxcclxuICAgICAgICBpZDogN1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTW9tbycsXHJcbiAgICAgICAgdXJsOiAnYXNzZXRzL21vbW8tMS5qcGcnLFxyXG4gICAgICAgIGlkOiA4XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdTYW5hJyxcclxuICAgICAgICB1cmw6ICdhc3NldHMvc2FuYS0xLmpwZycsXHJcbiAgICAgICAgaWQ6IDlcclxuICAgIH0sXHJcbl1cclxuIiwiaW1wb3J0IHtDb250cm9sbGVyfSBmcm9tICcuL0NvbnRyb2xsZXInO1xyXG5pbXBvcnQge1ZpZXd9IGZyb20gJy4vVmlldyc7XHJcbmltcG9ydCB7TW9kZWx9IGZyb20gJy4vTW9kZWwnO1xyXG5pbXBvcnQgJy4vc2Nzcy9zdHlsZS5zY3NzJztcclxuXHJcbmNvbnN0IGFwcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpO1xyXG5jb25zdCB2aWV3ID0gbmV3IFZpZXcoYXBwRWwpO1xyXG5jb25zdCBtb2RlbCA9IG5ldyBNb2RlbCgpO1xyXG5jb25zdCBjb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIobW9kZWwsIHZpZXcpO1xyXG4iLCJleHBvcnQgY2xhc3MgVmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvciAoYXBwRWwpIHtcclxuICAgICAgICB0aGlzLmFwcEVsID0gYXBwRWw7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyR3JlZXRpbmdzKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgdGV4dC5pbm5lclRleHQgPSAn0J7RgtC00LDQudGC0LUg0YHQstC+0Lkg0LPQvtC70L7RgS4g0J/QvtCx0LXQtNC40YLQtdC70Lgg0L/RgNC+0YXQvtC00Y/RgiDQsiDRgdC70LXQtNGD0Y7RidC40Lkg0YDQsNGD0L3QtC4nO1xyXG4gICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQodGV4dCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSAn0J3QsNGH0LDRgtGMJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVHYW1lU3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJHYW1lKHBhaXIpIHtcclxuICAgICAgICB0aGlzLmFwcEVsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGNvbnN0IFtnaXJsMSwgZ2lybDJdID0gcGFpcjsgXHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGltYWdlV3JhcHBlci5jbGFzc05hbWUgPSAnaW1hZ2Utd3JhcHBlcic7XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGltYWdlMS5zcmMgPSBnaXJsMS51cmw7XHJcbiAgICAgICAgaW1hZ2UxLmNsYXNzTmFtZSA9ICdpbWFnZS1jYXJkJztcclxuICAgICAgICBpbWFnZVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcclxuXHJcbiAgICAgICAgY29uc3QgdnNJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcbiAgICAgICAgdnNJbWFnZS5zcmMgPSAnYXNzZXRzL3ZzLnBuZyc7XHJcbiAgICAgICAgdnNJbWFnZS5jbGFzc05hbWUgPSAnaW1hZ2UtdnMnO1xyXG4gICAgICAgIGltYWdlV3JhcHBlci5hcHBlbmRDaGlsZCh2c0ltYWdlKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW1hZ2UyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgaW1hZ2UyLnNyYyA9IGdpcmwyLnVybDtcclxuICAgICAgICBpbWFnZTIuY2xhc3NOYW1lID0gJ2ltYWdlLWNhcmQnO1xyXG4gICAgICAgIGltYWdlV3JhcHBlci5hcHBlbmRDaGlsZChpbWFnZTIpOyBcclxuXHJcbiAgICAgICAgdGhpcy5hcHBFbC5hcHBlbmRDaGlsZChpbWFnZVdyYXBwZXIpOyAgXHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgdGV4dC5pbm5lclRleHQgPSAn0J7RgtC00LDQudGC0LUg0YHQstC+0Lkg0LPQvtC70L7RgS4nO1xyXG4gICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQodGV4dCk7XHJcblxyXG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVHaXJsQ2hvb3NlKGdpcmwxKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbWFnZTIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlR2lybENob29zZShnaXJsMik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyV2lubmVyKHdpbm5lcikge1xyXG4gICAgICAgIHRoaXMuYXBwRWwuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgdGV4dC5pbm5lclRleHQgPSAn0J/QvtCx0LXQtNC40YLQtdC70YwhJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICAgICBjb25zdCBpbWFnZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICBpbWFnZTEuc3JjID0gd2lubmVyLnVybDtcclxuICAgICAgICBpbWFnZTEuY2xhc3NOYW1lID0gJ2ltYWdlLWNhcmQnO1xyXG4gICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQoaW1hZ2UxKTsgXHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSAn0KHQv9C40YHQvtC6INC70LjQtNC10YDQvtCyJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVTaG93TGVhZGVycygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckxlYWRlcnMobGVhZGVycykge1xyXG4gICAgICAgIHRoaXMuYXBwRWwuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgdGV4dC5pbm5lclRleHQgPSAn0KLQtdC60YPRidC40LUg0LvQuNC00LXRgNGLJztcclxuICAgICAgICB0aGlzLmFwcEVsLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICAgICBsZWFkZXJzLmZvckVhY2goZ2lybCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlYWRlckJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBnaXJsLnVybDtcclxuICAgICAgICAgICAgaW1hZ2UuY2xhc3NOYW1lID0gJ2ltYWdlLWxlYWRlcic7XHJcbiAgICAgICAgICAgIGxlYWRlckJsb2NrLmFwcGVuZENoaWxkKGltYWdlKTsgXHJcblxyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICBuYW1lLmlubmVyVGV4dCA9IGdpcmwubmFtZTtcclxuICAgICAgICAgICAgbGVhZGVyQmxvY2suYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2b2ljZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgICAgIHZvaWNlcy5pbm5lclRleHQgPSBnaXJsLnZvaWNlcztcclxuICAgICAgICAgICAgbGVhZGVyQmxvY2suYXBwZW5kQ2hpbGQodm9pY2VzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwRWwuYXBwZW5kQ2hpbGQobGVhZGVyQmxvY2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uR2FtZVN0YXJ0KGNiKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVHYW1lU3RhcnQgPSBjYjtcclxuICAgIH1cclxuXHJcbiAgICBvbkdpcmxDaG9vc2UoY2IpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUdpcmxDaG9vc2UgPSBjYjtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3dMZWFkZXJzKGNiKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTaG93TGVhZGVycyA9IGNiO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7ZGJ9IGZyb20gJy4vZGInO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZGIgPSB0aGlzLmxvYWQoKTtcclxuICAgICAgICB0aGlzLmdpcmxzID0gWy4uLnRoaXMuZGJdO1xyXG4gICAgICAgIHRoaXMud2lubmVycyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBhaXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNOZXh0UGFpckV4aXN0KCkgPyBbdGhpcy5naXJsc1swXSwgdGhpcy5naXJsc1sxXV0gOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0V2lubmVyKHdpbm5lcikge1xyXG4gICAgICAgIGlmICh3aW5uZXIpIHtcclxuICAgICAgICAgICAgd2lubmVyLnZvaWNlcyArPSAxMDtcclxuICAgICAgICAgICAgdGhpcy53aW5uZXJzLnB1c2god2lubmVyKTtcclxuICAgICAgICAgICAgdGhpcy5naXJscy5zcGxpY2UoMCwyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlKCk7XHJcbiAgICAgICAgfSBcclxuICAgIH1cclxuXHJcbiAgICBnZXRXaW5uZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lubmVyc1swXTtcclxuICAgIH1cclxuXHJcbiAgICBpc05leHRQYWlyRXhpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2lybHMubGVuZ3RoID4gMTtcclxuICAgIH1cclxuXHJcbiAgICBpc05leHRSb3VuZFJlYWR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpbm5lcnMubGVuZ3RoID4gMSB8fCB0aGlzLmdpcmxzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnROZXh0Um91bmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2lybHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lubmVycy51bnNoaWZ0KHRoaXMuZ2lybHNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdpcmxzID0gdGhpcy53aW5uZXJzO1xyXG4gICAgICAgIHRoaXMud2lubmVycyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExlYWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuc29ydCgoZ2lybDEsIGdpcmwyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnaXJsMS52b2ljZXMgPiBnaXJsMi52b2ljZXMpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKGdpcmwxLnZvaWNlcyA9PT0gZ2lybDIudm9pY2VzKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKGdpcmwxLnZvaWNlcyA8IGdpcmwyLnZvaWNlcykgcmV0dXJuIDE7XHJcbiAgICAgICAgfSkuc2xpY2UoMCwgMyk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZCgpIHtcclxuICAgICAgICBjb25zdCBsb2NhbGRiID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RiJyk7XHJcbiAgICAgICAgLy8g0J/QvtC70YPRh9C40LvQuCDQsdCw0LfRgyDQuNC3INCb0KEg0LXRgdC70Lgg0LHQsNC30LAg0LXRgdGC0YwsINGC0L7Qs9C00LAg0LLQtdGA0L3Rg9GC0Ywg0LXQtSwg0LXRgdC70Lgg0LXQtSDQvdC10YIgKNCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC30L3QsNGH0LXQvdC40LUg0L3Rg9C70Lsp0LLQtdGA0L3Rg9GC0Ywg0JTQkSDQuNC3INGE0LDQudC70LAuXHJcbiAgICAgICAgaWYgKGxvY2FsZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxkYik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRiLm1hcChnaXJsID0+IHtcclxuICAgICAgICAgICAgICAgIGdpcmwudm9pY2VzID0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnaXJsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZSgpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGInLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRiKSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGInKSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy52aWV3Lm9uR2FtZVN0YXJ0KHRoaXMuc3RhcnRHYW1lLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5vbkdpcmxDaG9vc2UodGhpcy5jaG9vc2VHaXJsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5vblNob3dMZWFkZXJzKHRoaXMuc2hvd0xlYWRlcnMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlckdyZWV0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0R2FtZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbC5pc05leHRQYWlyRXhpc3QoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVuZGVyR2FtZSh0aGlzLm1vZGVsLmdldFBhaXIoKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGVsLmlzTmV4dFJvdW5kUmVhZHkoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnN0YXJ0TmV4dFJvdW5kKCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5yZW5kZXJHYW1lKHRoaXMubW9kZWwuZ2V0UGFpcigpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVuZGVyV2lubmVyKHRoaXMubW9kZWwuZ2V0V2lubmVyKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaG9vc2VHaXJsKHdpbm5lcikge1xyXG4gICAgICAgIHRoaXMubW9kZWwuc2V0V2lubmVyKHdpbm5lcik7XHJcbiAgICAgICAgdGhpcy5zdGFydEdhbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TGVhZGVycygpIHtcclxuICAgICAgICBjb25zdCBsZWFkZXJzID0gdGhpcy5tb2RlbC5nZXRMZWFkZXJzKCk7XHJcbiAgICAgICAgdGhpcy52aWV3LnJlbmRlckxlYWRlcnMobGVhZGVycyk7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==